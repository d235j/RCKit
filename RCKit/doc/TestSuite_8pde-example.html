<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RCKit: TestSuite.pde</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RCKit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TestSuite.pde</div>  </div>
</div><!--header-->
<div class="contents">
<p>Self test suite for RCKit classes</p>
<div class="fragment"><div class="line"><span class="comment">// TestSuite.pde</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Self test suite for RCKit classes</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Runs correctly on Duemilanova and Mega. </span></div>
<div class="line"><span class="comment">// Subset tests all run OK on Diecimila, but all tests together uses too much RAM?</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Copyright (C) 2010 Mike McCauley</span></div>
<div class="line"><span class="comment">// $Id: $</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;SPI.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;WiShield.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Ethernet.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Servo.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Setter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Inverter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Limiter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Linear.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ServoSetter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;AnalogSetter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;HBridgeSetter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DigitalSetter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;AccelStepper.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;AccelStepperSpeedSetter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;AccelStepperPositionSetter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DifferentialSetter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;MotorControllerSetter.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;SetterDebug.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define ANALOG_TEST_PINA 0</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define ANALOG_TEST_PINB 1</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define DIGITAL_TEST_PIN 2</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><a name="_a0"></a><a class="code" href="classSetterDebug.html" title="Class for testing Setters. Used by the sample TestSuite sketch.">SetterDebug</a> d1, d2;</div>
<div class="line"><a name="_a1"></a><a class="code" href="classSetter.html" title="Virtual base class for classes that receive a value, maybe transform it and then do something with it...">Setter</a> s1(&amp;d1); <span class="comment">// Sets the target at construction time</span></div>
<div class="line"><a name="_a2"></a><a class="code" href="classInverter.html" title="Setter object that inverts its value.">Inverter</a> i1;</div>
<div class="line"><a class="code" href="classInverter.html" title="Setter object that inverts its value.">Inverter</a> i2;</div>
<div class="line"><a name="_a3"></a><a class="code" href="classLimiter.html" title="Setter class that limits its output to between specified min and max values.">Limiter</a> l1(110, 120);</div>
<div class="line"><a name="_a4"></a><a class="code" href="classLinear.html" title="Setter class that implements linear transform of its input value.">Linear</a> lin1(0.5, 10);</div>
<div class="line">Servo servo;</div>
<div class="line"><a name="_a5"></a><a class="code" href="classServoSetter.html" title="Setter class that limits its input to between specified min and max values.">ServoSetter</a> ss1(&amp;servo);</div>
<div class="line"><a name="_a6"></a><a class="code" href="classAnalogSetter.html" title="Setter class that sets its value to an analog output pin.">AnalogSetter</a> as1(ANALOG_TEST_PINA); </div>
<div class="line"><a class="code" href="classAnalogSetter.html" title="Setter class that sets its value to an analog output pin.">AnalogSetter</a> as2(ANALOG_TEST_PINB); </div>
<div class="line"><a name="_a7"></a><a class="code" href="classHBridgeSetter.html" title="Setter class that outputs its value to a HBridge configured on 2 output Setter.">HBridgeSetter</a> hs1(&amp;d1, &amp;d2); </div>
<div class="line"></div>
<div class="line"><a name="_a8"></a><a class="code" href="classDigitalSetter.html" title="Setter class that sets its value to an analog output pin.">DigitalSetter</a> ds1(DIGITAL_TEST_PIN);</div>
<div class="line">AccelStepper stepper;</div>
<div class="line"><a name="_a9"></a><a class="code" href="classAccelStepperSpeedSetter.html" title="Setter class that outputs its value to set the speed of an AccelStepper.">AccelStepperSpeedSetter</a> asss1(&amp;stepper); </div>
<div class="line"><a name="_a10"></a><a class="code" href="classAccelStepperPositionSetter.html" title="Setter class that outputs its value to set the position of an AccelStepper.">AccelStepperPositionSetter</a> asps1(&amp;stepper); </div>
<div class="line"><a name="_a11"></a><a class="code" href="classDifferentialSetter.html" title="Setter class cluster that controls 2 analog outputs based on 2 analog inputs so that a joystic can be...">DifferentialSetter</a> diff1(&amp;d1, &amp;d2);</div>
<div class="line"><a name="_a12"></a><a class="code" href="classDifferentialLRSetter.html" title="Setter class cluster that provides the left-right input to a DifferentialSetter.">DifferentialLRSetter</a> di1(&amp;diff1);</div>
<div class="line"></div>
<div class="line"><a name="_a13"></a><a class="code" href="classMotorControllerSetter.html" title="Setter class that outputs its value to a MotorController configured on 1 digital and one analog outpu...">MotorControllerSetter</a> mc1(&amp;d1, &amp;d2);</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> setup()</div>
<div class="line">{</div>
<div class="line">  Serial.begin(9600);</div>
<div class="line">  pinMode(DIGITAL_TEST_PIN, OUTPUT);</div>
<div class="line">  stepper.setMaxSpeed(1000);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errors = 0;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> error(<span class="keyword">const</span> <span class="keywordtype">char</span> *m)</div>
<div class="line">{</div>
<div class="line">  Serial.print(<span class="stringliteral">&quot;Error: &quot;</span>);</div>
<div class="line">  Serial.println(m);</div>
<div class="line">  errors++;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> check(<span class="keywordtype">boolean</span> t, <span class="keyword">const</span> <span class="keywordtype">char</span> *m)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (!t)</div>
<div class="line">    error(m);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> loop()</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check basic setting</span></div>
<div class="line">  <span class="comment">// d1 should already be the target for this setter</span></div>
<div class="line">  <span class="comment">// s1-&gt;d1</span></div>
<div class="line">  d1.<a name="a14"></a><a class="code" href="classSetter.html#ae5f8889050314352c948572a58b6042d" title="Sets the failsafeValue.">setFailsafeValue</a>(123);</div>
<div class="line">  s1.input(100);</div>
<div class="line">  check(d1.<a name="a15"></a><a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 100, <span class="stringliteral">&quot;basic 1&quot;</span>);</div>
<div class="line">  s1.input(200);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 200, <span class="stringliteral">&quot;basic 2&quot;</span>);</div>
<div class="line">  check(!d1.<a name="a16"></a><a class="code" href="classSetterDebug.html#a1f26f63c231eb0e47b830b91a4dc4e4b">failed</a>(), <span class="stringliteral">&quot;basic 3&quot;</span>);</div>
<div class="line">  s1.failsafe();</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a1f26f63c231eb0e47b830b91a4dc4e4b">failed</a>(), <span class="stringliteral">&quot;basic 4&quot;</span>);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 123, <span class="stringliteral">&quot;basic 5&quot;</span>);</div>
<div class="line">    </div>
<div class="line">  <span class="comment">// Now test the Inverter class</span></div>
<div class="line">  <span class="comment">// i1-&gt;d1</span></div>
<div class="line">  i1.<a name="a17"></a><a class="code" href="classSetter.html#a5a58d98a80685b6790695cebd1f0ec08">setTarget</a>(&amp;d1);</div>
<div class="line">  i1.<a name="a18"></a><a class="code" href="classInverter.html#acbb414a5990cf41be1cc1ad4e41a3a31">input</a>(300);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == -300, <span class="stringliteral">&quot;Inverter 1&quot;</span>);</div>
<div class="line">  i1.<a class="code" href="classInverter.html#acbb414a5990cf41be1cc1ad4e41a3a31">input</a>(-400);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 400, <span class="stringliteral">&quot;Inverter 2&quot;</span>);</div>
<div class="line">       </div>
<div class="line">  <span class="comment">// 2 Inverters in series</span></div>
<div class="line">  <span class="comment">// i2-&gt;i1-&gt;d1</span></div>
<div class="line">  i2.<a class="code" href="classSetter.html#a5a58d98a80685b6790695cebd1f0ec08">setTarget</a>(&amp;i1);</div>
<div class="line">  i2.<a class="code" href="classInverter.html#acbb414a5990cf41be1cc1ad4e41a3a31">input</a>(600);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 600, <span class="stringliteral">&quot;Inverter 3&quot;</span>);</div>
<div class="line">  i2.<a class="code" href="classInverter.html#acbb414a5990cf41be1cc1ad4e41a3a31">input</a>(-700);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == -700, <span class="stringliteral">&quot;Inverter 4&quot;</span>);</div>
<div class="line">    </div>
<div class="line">  <span class="comment">// Now test the Limiter class</span></div>
<div class="line">  <span class="comment">// l1-&gt;d1</span></div>
<div class="line">  l1.setTarget(&amp;d1);</div>
<div class="line">  l1.input(300);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 120, <span class="stringliteral">&quot;Limiter 1&quot;</span>);</div>
<div class="line">  l1.input(120);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 120, <span class="stringliteral">&quot;Limiter 2&quot;</span>);</div>
<div class="line">  l1.input(115);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 115, <span class="stringliteral">&quot;Limiter 3&quot;</span>);</div>
<div class="line">  l1.input(100);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 110, <span class="stringliteral">&quot;Limiter 4&quot;</span>);</div>
<div class="line">    </div>
<div class="line">  <span class="comment">// Test the Linear class</span></div>
<div class="line">  lin1.setTarget(&amp;d1);</div>
<div class="line">  lin1.input(0);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 10, <span class="stringliteral">&quot;Linear 1&quot;</span>);</div>
<div class="line">  lin1.input(10);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 15, <span class="stringliteral">&quot;Linear 2&quot;</span>);</div>
<div class="line">  lin1.input(100);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 60, <span class="stringliteral">&quot;Linear 3&quot;</span>);</div>
<div class="line">  lin1.input(-100);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == -40, <span class="stringliteral">&quot;Linear 4&quot;</span>);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Test ServoSetter</span></div>
<div class="line">  <span class="comment">// ss1-&gt;servo</span></div>
<div class="line">  servo.attach(2);</div>
<div class="line">  ss1.input(0);</div>
<div class="line">  check(servo.read() == 0, <span class="stringliteral">&quot;ServoSetter 1&quot;</span>);</div>
<div class="line">  ss1.input(128);</div>
<div class="line">  check(servo.read() == 90, <span class="stringliteral">&quot;ServoSetter 2&quot;</span>);</div>
<div class="line">  ss1.input(255);</div>
<div class="line">  check(servo.read() == 180, <span class="stringliteral">&quot;ServoSetter 3&quot;</span>);</div>
<div class="line">    </div>
<div class="line">  <span class="comment">// Test AnalogSetter</span></div>
<div class="line">  <span class="comment">// Can&#39;t test necause can&#39;t read the resulting output</span></div>
<div class="line">  <span class="comment">// as1-&gt;analog pin 0</span></div>
<div class="line">  as1.input(0);  </div>
<div class="line">  as1.input(128);</div>
<div class="line">  as1.input(255);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Test HBridgeSetter</span></div>
<div class="line">  hs1.input(127);    </div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0 &amp;&amp; d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;HBridgeSetter 1&quot;</span>);</div>
<div class="line">  hs1.input(200);  </div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 146 &amp;&amp; d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;HBridgeSetter 2&quot;</span>);</div>
<div class="line">  hs1.input(255);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 256 &amp;&amp; d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;HBridgeSetter 3&quot;</span>);</div>
<div class="line">  hs1.input(100);  </div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0 &amp;&amp; d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 54, <span class="stringliteral">&quot;HBridgeSetter 4&quot;</span>);</div>
<div class="line">  hs1.input(0);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0 &amp;&amp; d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 254, <span class="stringliteral">&quot;HBridgeSetter 5&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Test DigitalSetter</span></div>
<div class="line">  <span class="comment">// Cant really read the resulting output</span></div>
<div class="line">  <span class="comment">// as1-&gt;analog pin 0</span></div>
<div class="line">  ds1.input(0);</div>
<div class="line">  check(digitalRead(DIGITAL_TEST_PIN) == LOW, <span class="stringliteral">&quot;DigitalSetter 1&quot;</span>);</div>
<div class="line">  ds1.input(100);</div>
<div class="line">  check(digitalRead(DIGITAL_TEST_PIN) == HIGH, <span class="stringliteral">&quot;DigitalSetter 2&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Test AccelStepperSpeedSetter</span></div>
<div class="line">  <span class="comment">// asss1-&gt;stepper</span></div>
<div class="line">  asss1.input(0);</div>
<div class="line">  check(stepper.speed() == 0.0, <span class="stringliteral">&quot;AccelStepperSpeedSetter 1&quot;</span>);</div>
<div class="line">  asss1.input(100);</div>
<div class="line">  check(stepper.speed() == 100.0, <span class="stringliteral">&quot;AccelStepperSpeedSetter 2&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Test AccelStepperPositionSetter</span></div>
<div class="line">  <span class="comment">// asps1-&gt;stepper </span></div>
<div class="line">  asps1.input(0);</div>
<div class="line">  check(stepper.targetPosition() == 0, <span class="stringliteral">&quot;AccelStepperPositionSetter 1&quot;</span>);</div>
<div class="line">  asps1.input(100);</div>
<div class="line">  check(stepper.targetPosition() == 100, <span class="stringliteral">&quot;AccelStepperPositionSetter 2&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// test DifferentialSetter</span></div>
<div class="line">  diff1.input(127);</div>
<div class="line">  di1.input(127);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 127, <span class="stringliteral">&quot;DifferentialSetter 1&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 127, <span class="stringliteral">&quot;DifferentialSetter 2&quot;</span>);</div>
<div class="line">  di1.input(157);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 157, <span class="stringliteral">&quot;DifferentialSetter 3&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 97, <span class="stringliteral">&quot;DifferentialSetter 4&quot;</span>);</div>
<div class="line">  di1.input(107);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 107, <span class="stringliteral">&quot;DifferentialSetter 5&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 147, <span class="stringliteral">&quot;DifferentialSetter 6&quot;</span>);</div>
<div class="line">  diff1.input(255);</div>
<div class="line">  di1.input(127);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 255, <span class="stringliteral">&quot;DifferentialSetter 7&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 255, <span class="stringliteral">&quot;DifferentialSetter 8&quot;</span>);</div>
<div class="line">  di1.input(147);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 255, <span class="stringliteral">&quot;DifferentialSetter 9&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 215, <span class="stringliteral">&quot;DifferentialSetter 10&quot;</span>);</div>
<div class="line">  di1.input(107);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 215, <span class="stringliteral">&quot;DifferentialSetter 11&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 255, <span class="stringliteral">&quot;DifferentialSetter 12&quot;</span>);</div>
<div class="line">  diff1.input(0);</div>
<div class="line">  di1.input(127);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;DifferentialSetter 13&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;DifferentialSetter 14&quot;</span>);</div>
<div class="line">  di1.input(147);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 40, <span class="stringliteral">&quot;DifferentialSetter 15&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;DifferentialSetter 16&quot;</span>);</div>
<div class="line">  di1.input(107);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;DifferentialSetter 17&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 40, <span class="stringliteral">&quot;DifferentialSetter 18&quot;</span>);</div>
<div class="line">     </div>
<div class="line">  <span class="comment">// Long chain</span></div>
<div class="line">  <span class="comment">// i1-&gt;l1-&gt;i2-&gt;asps1-&gt;stepper</span></div>
<div class="line">  i2.<a class="code" href="classSetter.html#a5a58d98a80685b6790695cebd1f0ec08">setTarget</a>(&amp;asps1);</div>
<div class="line">  l1.setTarget(&amp;i2);</div>
<div class="line">  i1.<a class="code" href="classSetter.html#a5a58d98a80685b6790695cebd1f0ec08">setTarget</a>(&amp;l1);</div>
<div class="line">  i1.<a class="code" href="classInverter.html#acbb414a5990cf41be1cc1ad4e41a3a31">input</a>(300);</div>
<div class="line">  check(stepper.targetPosition() == -110, <span class="stringliteral">&quot;Chaining 1&quot;</span>);</div>
<div class="line">  i1.<a class="code" href="classInverter.html#acbb414a5990cf41be1cc1ad4e41a3a31">input</a>(-400);</div>
<div class="line">  check(stepper.targetPosition() == -120, <span class="stringliteral">&quot;Chaining 2&quot;</span>);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// MotorController</span></div>
<div class="line">  mc1.input(0);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;MotorControllerSetter 1&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 254, <span class="stringliteral">&quot;MotorControllerSetter 2&quot;</span>);</div>
<div class="line">  mc1.input(100);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;MotorControllerSetter 1&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 54, <span class="stringliteral">&quot;MotorControllerSetter 2&quot;</span>);</div>
<div class="line">  mc1.input(127);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 255, <span class="stringliteral">&quot;MotorControllerSetter 3&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 0, <span class="stringliteral">&quot;MotorControllerSetter 4&quot;</span>);</div>
<div class="line">  mc1.input(128);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 255, <span class="stringliteral">&quot;MotorControllerSetter 3&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 2, <span class="stringliteral">&quot;MotorControllerSetter 4&quot;</span>);</div>
<div class="line">  mc1.input(200);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 255, <span class="stringliteral">&quot;MotorControllerSetter 5&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 146, <span class="stringliteral">&quot;MotorControllerSetter 6&quot;</span>);</div>
<div class="line">  mc1.input(255);</div>
<div class="line">  check(d1.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 255, <span class="stringliteral">&quot;MotorControllerSetter 5&quot;</span>);</div>
<div class="line">  check(d2.<a class="code" href="classSetterDebug.html#a6eb118fc80e4de3cc5a31c88140bac8d">lastValue</a>() == 256, <span class="stringliteral">&quot;MotorControllerSetter 6&quot;</span>);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// All done</span></div>
<div class="line">  Serial.print(<span class="stringliteral">&quot;Done. Errors: &quot;</span>);</div>
<div class="line">  Serial.println(errors, DEC);</div>
<div class="line">  </div>
<div class="line">  pinMode(13, OUTPUT);</div>
<div class="line">  <span class="keywordflow">if</span> (errors)</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// Errors: Blink twice</span></div>
<div class="line">    digitalWrite(13, HIGH);</div>
<div class="line">    delay(500);</div>
<div class="line">    digitalWrite(13, LOW);</div>
<div class="line">    delay(500);</div>
<div class="line">    digitalWrite(13, HIGH);</div>
<div class="line">    delay(500);</div>
<div class="line">    digitalWrite(13, LOW);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// OK, Blink once</span></div>
<div class="line">    digitalWrite(13, HIGH);</div>
<div class="line">    delay(500);</div>
<div class="line">    digitalWrite(13, LOW);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">while</span> (1)</div>
<div class="line">    ;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1
</small></address>
</body>
</html>
